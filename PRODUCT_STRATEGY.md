# Lattice 产品化与商业化规划（草案）

> 目标：在确保核心渲染问题收敛后，分阶段推进商业化产品落地。
> 时间参考：当前为 2026-02-06（北京时间）。

---

## 0. 当前阻塞项（必须先收敛）

1. 长文件截断问题（Live Preview / Reading）
2. 文件切换内容错乱
3. 文本重复显示 / 语法标记隐藏异常 / 公式渲染异常（残留）

**行动**：先完成 `MANUAL_VERIFICATION.md` 复测，提供点位截图与行号。

---

## 1. 产品定位与差异化

### 核心定位
- 面向科研与高强度学习场景的“研究工作台”，融合：
  - 结构化笔记（Markdown/表格/公式）
  - 学术资料（PDF/PPT/DOCX）阅读+批注
  - 代码与笔记同屏协作

### 目标用户
- 留学/科研用户：文献密集型读写+批注
- STEM 学生：公式/代码/笔记混合
- 轻量研究团队（后期）

### 竞争差异
与 Obsidian / Zotero / Notion 的差异点：
- 原生“文件系统 + 本地数据”
- 更重“公式/代码/批注”一体
- 可扩展插件体系 + AI 助理（项目内语义理解）

---

## 2. 商业化模式（建议组合）

### 免费层（吸引流量）
- 本地文件读写
- Markdown + 公式 + 基础 PDF 批注
- 基础导出

### 订阅层（个人）
- AI 辅助（摘要/对齐引用/批注分析）
- 高级导出（批注报告、研究综述模板）
- 高级插件（官方插件合集）

### 专业层（实验室/小团队，后期）
- 团队共享知识库
- 权限/审计
- 统一模板与工具链

---

## 3. 功能路线图（分阶段）

### Phase 0：质量收敛（现在）
- 修复渲染核心问题
- 增加回归测试样例（手工为主）

### Phase 1：MVP 产品化（4-6 周）
- 插件体系 v0（读取、注册、开关）
- AI 基座 v0（文件摘要/批注摘要/上下文注入）
- 产品包装（品牌/应用信息/欢迎页）

### Phase 2：研究工作流增强（8-12 周）
- 批注知识汇总（按文献/主题）
- 引用管理轻量版（文献元数据）
- 同屏多窗口工作流优化

### Phase 3：商业化强化（12-24 周）
- 插件生态发布体系
- AI Agent（跨文档推理/归纳）
- 团队协作（可选）

---

## 4. 插件体系（Obsidian/Zotero 风格）

### 插件目标
- 功能扩展不影响核心稳定性
- 可控权限（文件读写/网络/批注）

### 插件最小规范（v0）
- `manifest.json`（插件 id / 名称 / 版本 / 权限）
- `entry.ts`（导出 activate/deactivate）
- 插件注册与开关

### 安全策略
- 沙盒隔离（运行时限制能力）
- 权限白名单（逐项授权）

**注意**：实现细节将先基于官方文档验证（Context7）。

---

## 5. AI 体系（可演进）

### 目标能力
- 理解项目语法（Markdown / 公式 / 代码块 / 批注）
- 读取文件树与批注内容
- 在“局部上下文”内回答与建议

### 最小 AI 基座（v0）
- 统一上下文构造器（文件 + 批注）
- 可扩展 Tool 接口（读取文件、搜索、摘要）
- 仅本地处理/可控 API 调用

### 中期能力
- 文献综述模板
- 研究问题拆解与追踪
- 智能批注归类

---

## 6. 产品包装（Web + Desktop）

### Web
- 快速试用入口
- 示例文件与演示

### Desktop（Tauri）
- 本地文件系统优势
- 离线稳定

---

## 7. 风险与应对

| 风险 | 影响 | 预案 |
|---|---|---|
| 渲染质量问题 | 留存下降 | 优先保证基础体验 |
| AI 成本过高 | 毛利下降 | 本地缓存 + 限额 |
| 插件安全风险 | 用户信任下降 | 权限体系 + 沙盒 |

---

## 8. 里程碑交付清单（可执行）

### 近期（2-4 周）
- 修复全部渲染问题
- 插件规范草案 + demo 插件
- AI 基座框架（不一定接外部模型）

### 中期（6-12 周）
- AI 的批注分析 + 模板输出
- 插件市场（仅官方/白名单）

---

## 9. 需要你确认的方向

1. 是否优先 “Desktop 先行”？
2. 是否希望 “AI 默认本地/可选云端”？
3. 订阅定价策略（低价长订阅 vs 高价短订阅）

---

> 后续进入实现阶段前，将依据官方文档（Context7）确认技术细节。
